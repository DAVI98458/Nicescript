-- Carrega Rayfield
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

-- Janela
local Window = Rayfield:CreateWindow({
    Name = "Teleport Menu night 3 cabins",
    LoadingTitle = "Teleport System",
    LoadingSubtitle = "Shadown_gd",
    ConfigurationSaving = {
        Enabled = true,
        FileName = "TeleportMenuConfig"
    }
})

-- Aba
local TeleportTab = Window:CreateTab("Main", 4483362458)

-- Serviços
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

-- =========================
-- UTILIDADES
-- =========================
local function getHRP()
    local char = player.Character or player.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart")
end

local function teleportTo(pos)
    getHRP().CFrame = CFrame.new(pos)
end

-- =========================
-- SAFE ZONE + NOCLIP
-- =========================
local noclipConnection

local function enableNoclip()
    if noclipConnection then return end

    noclipConnection = RunService.Stepped:Connect(function()
        local char = player.Character
        if char then
            for _, v in ipairs(char:GetDescendants()) do
                if v:IsA("BasePart") then
                    v.CanCollide = false
                end
            end
        end
    end)
end

local function goToSafeZone()
    teleportTo(Vector3.new(-54, 15, 252))
    enableNoclip()
end

-- =========================
-- DISABLED COLD
-- =========================
local function disableCold()
    local charFolder = Workspace:FindFirstChild(player.Name)
    if not charFolder then return end

    local temperature = charFolder:FindFirstChild("Temperature")
    if not temperature then return end

    if temperature:IsA("Script") or temperature:IsA("LocalScript") then
        temperature.Disabled = true
    elseif temperature:IsA("BoolValue") then
        temperature.Value = true
    end
end

player.CharacterAdded:Connect(function()
    task.wait(1)
    disableCold()
end)

-- =========================
-- ADD 100% BATTERY HEATER
-- =========================
local function addHeaterBattery()
    local heater = Workspace:FindFirstChild("Heater")
    if not heater then return end

    local battery = heater:FindFirstChild("BatteryValue")
    if not battery then return end

    if battery:IsA("NumberValue") or battery:IsA("IntValue") then
        battery.Value = 100
    end
end

-- =========================
-- GRAB ALL GÁS (EXATO)
-- =========================
local function grabAllGas()
    local folder = Workspace:WaitForChild("JerryCans")
    local hrp = getHRP()
    local originalCFrame = hrp.CFrame

    local targets = {
        folder:WaitForChild("JerryCan"),
        folder:GetChildren()[2],
        folder:GetChildren()[3],
        folder:GetChildren()[4]
    }

    for _, target in ipairs(targets) do
        if target then
            local click = target:FindFirstChildWhichIsA("ClickDetector", true)
            local part = target:FindFirstChildWhichIsA("BasePart", true)

            if click and part then
                hrp.CFrame = part.CFrame + Vector3.new(0, 2, 0)
                task.wait(0.2)
                fireclickdetector(click)
                task.wait(0.2)
            end
        end
    end

    hrp.CFrame = originalCFrame
end

-- =========================
-- GRAB ALL ITEMS
-- =========================
local function grabAllItems()
    local folder = Workspace:WaitForChild("ItemSpots")
    local hrp = getHRP()
    local originalCFrame = hrp.CFrame

    for _, obj in ipairs(folder:GetDescendants()) do
        if obj:IsA("ClickDetector") then
            local parent = obj.Parent
            while parent and not parent:IsA("BasePart") do
                parent = parent.Parent
            end

            if parent then
                hrp.CFrame = parent.CFrame + Vector3.new(0, 2, 0)
                task.wait(0.2)
                fireclickdetector(obj)
                task.wait(0.2)
            end
        end
    end

    hrp.CFrame = originalCFrame
end

-- =========================
-- BOTÕES
-- =========================
TeleportTab:CreateButton({
    Name = "Cabin 1",
    Callback = function()
        teleportTo(Vector3.new(102, 4, -245))
    end
})

TeleportTab:CreateButton({
    Name = "Cabin 2",
    Callback = function()
        teleportTo(Vector3.new(-33, 4, 68))
    end
})

TeleportTab:CreateButton({
    Name = "Cabin 3",
    Callback = function()
        teleportTo(Vector3.new(-40, 4, 267))
    end
})

TeleportTab:CreateButton({
    Name = "Cabin 4",
    Callback = function()
        teleportTo(Vector3.new(231, 4, 243))
    end
})

TeleportTab:CreateButton({
    Name = "Lodge",
    Callback = function()
        teleportTo(Vector3.new(-233, 17, 110))
    end
})

TeleportTab:CreateButton({
    Name = "Safe Zone",
    Callback = function()
        goToSafeZone()
    end
})

TeleportTab:CreateButton({
    Name = "Grab all gás",
    Callback = function()
        grabAllGas()
    end
})

TeleportTab:CreateButton({
    Name = "Grab all items on the map",
    Callback = function()
        grabAllItems()
    end
})

TeleportTab:CreateButton({
    Name = "Disable cold",
    Callback = function()
        disableCold()
    end
})

TeleportTab:CreateButton({
    Name = "Add 100% battery in heater",
    Callback = function()
        addHeaterBattery()
    end
})
